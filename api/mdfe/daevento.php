<?php

error_reporting(E_ALL);
ini_set('display_errors', 'On');
require_once '../../bootstrap.php';

use NFePHP\DA\MDFe\Daevento;

$xml = base64_decode('PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48cHJvY0luY0NvbmR1dG9yIHZlcnNhbz0iMy4wMCIgeG1sbnM9Imh0dHA6Ly93d3cucG9ydGFsZmlzY2FsLmluZi5ici9tZGZlIj48ZXZlbnRvTURGZSB4bWxucz0iaHR0cDovL3d3dy5wb3J0YWxmaXNjYWwuaW5mLmJyL21kZmUiIHZlcnNhbz0iMy4wMCI+PGluZkV2ZW50byBJZD0iSUQxMTAxMTQyNDIyMTAyMTg0MzI0MzAwMDE2MTU4MDAxMDAwMDA1NDYxMTc4MzIzMjQyNDAxIj48Y09yZ2FvPjI0PC9jT3JnYW8+PHRwQW1iPjE8L3RwQW1iPjxDTlBKPjIxODQzMjQzMDAwMTYxPC9DTlBKPjxjaE1ERmU+MjQyMjEwMjE4NDMyNDMwMDAxNjE1ODAwMTAwMDAwNTQ2MTE3ODMyMzI0MjQ8L2NoTURGZT48ZGhFdmVudG8+MjAyMi0xMC0yMFQwODo0OTo1My0wMzowMDwvZGhFdmVudG8+PHRwRXZlbnRvPjExMDExNDwvdHBFdmVudG8+PG5TZXFFdmVudG8+MTwvblNlcUV2ZW50bz48ZGV0RXZlbnRvIHZlcnNhb0V2ZW50bz0iMy4wMCI+PGV2SW5jQ29uZHV0b3JNREZlPjxkZXNjRXZlbnRvPkluY2x1c2FvIENvbmR1dG9yPC9kZXNjRXZlbnRvPjxjb25kdXRvcj48eE5vbWU+Q1JFU0lPIE1JQ0FJQVMgTElOTyBBTFZFUzwveE5vbWU+PENQRj4wMDI4ODc0MzIzNzwvQ1BGPjwvY29uZHV0b3I+PC9ldkluY0NvbmR1dG9yTURGZT48L2RldEV2ZW50bz48L2luZkV2ZW50bz48U2lnbmF0dXJlIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwLzA5L3htbGRzaWcjIj48U2lnbmVkSW5mbz48Q2Fub25pY2FsaXphdGlvbk1ldGhvZCBBbGdvcml0aG09Imh0dHA6Ly93d3cudzMub3JnL1RSLzIwMDEvUkVDLXhtbC1jMTRuLTIwMDEwMzE1Ii8+PFNpZ25hdHVyZU1ldGhvZCBBbGdvcml0aG09Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvMDkveG1sZHNpZyNyc2Etc2hhMSIvPjxSZWZlcmVuY2UgVVJJPSIjSUQxMTAxMTQyNDIyMTAyMTg0MzI0MzAwMDE2MTU4MDAxMDAwMDA1NDYxMTc4MzIzMjQyNDAxIj48VHJhbnNmb3Jtcz48VHJhbnNmb3JtIEFsZ29yaXRobT0iaHR0cDovL3d3dy53My5vcmcvMjAwMC8wOS94bWxkc2lnI2VudmVsb3BlZC1zaWduYXR1cmUiLz48VHJhbnNmb3JtIEFsZ29yaXRobT0iaHR0cDovL3d3dy53My5vcmcvVFIvMjAwMS9SRUMteG1sLWMxNG4tMjAwMTAzMTUiLz48L1RyYW5zZm9ybXM+PERpZ2VzdE1ldGhvZCBBbGdvcml0aG09Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvMDkveG1sZHNpZyNzaGExIi8+PERpZ2VzdFZhbHVlPkx0SGZnZGMzZlNocXVZcTdONWszbkJ5NmJubz08L0RpZ2VzdFZhbHVlPjwvUmVmZXJlbmNlPjwvU2lnbmVkSW5mbz48U2lnbmF0dXJlVmFsdWU+Um9Rd3hHTGh1RkJndjEwaFNiNThVdEJpb25kTFhxVWtkbDJwa3JEeTBCWUpPeERBbnNZVmwrWWxNWEd1dGtBT2N2RCthM1c4NUhJT1A1ck52WFBscDI2Y0VlbVFNcXlCVEtRMEVnZmlLOVZVQWRMeFhVak9sSkc2Q0ppL05KN1gya2QwRk1OaEw4dWFvYU5KSTZMdGduMGJsRDNSZFh3RVc5WThhODdqL3V5Vnh3azhpZTRKV0p2ZEFrOW1WUm1ZTjYxRUcvUjF0a0wrL0dZc2pzQ1RCUWVoL3dMNldnZ2xtZ0l2TFdaa2xtNDhNMzMycDNRVmFQWDVHOWlGMUtsWXdQZVdzTlQrN2txRURmT0lEZS96Rm1zUzVyWVArWTJWRCtRMnN4dVRxZkFjRUtzMmVrWXFjUVVHb0pvNUkxeW5rQnY2ZGNDWHpUY3FoclB2YXNoZ05BPT08L1NpZ25hdHVyZVZhbHVlPjxLZXlJbmZvPjxYNTA5RGF0YT48WDUwOUNlcnRpZmljYXRlPk1JSUlDRENDQmZDZ0F3SUJBZ0lJYmNuTXR2TDNXQUV3RFFZSktvWklodmNOQVFFTEJRQXdkakVMTUFrR0ExVUVCaE1DUWxJeEV6QVJCZ05WQkFvVENrbERVQzFDY21GemFXd3hOakEwQmdOVkJBc1RMVk5sWTNKbGRHRnlhV0VnWkdFZ1VtVmpaV2wwWVNCR1pXUmxjbUZzSUdSdklFSnlZWE5wYkNBdElGSkdRakVhTUJnR0ExVUVBeE1SUVVNZ1UwRkdSVmRGUWlCU1JrSWdkalV3SGhjTk1qSXdNVEkzTVRjeE9EQXlXaGNOTWpNd01USTNNVGN4T0RBeVdqQ0NBUUF4Q3pBSkJnTlZCQVlUQWtKU01STXdFUVlEVlFRS0V3cEpRMUF0UW5KaGMybHNNUXN3Q1FZRFZRUUlFd0pTVGpFUU1BNEdBMVVFQnhNSFRVOVRVMDlTVHpFMk1EUUdBMVVFQ3hNdFUyVmpjbVYwWVhKcFlTQmtZU0JTWldObGFYUmhJRVpsWkdWeVlXd2daRzhnUW5KaGMybHNJQzBnVWtaQ01SWXdGQVlEVlFRTEV3MVNSa0lnWlMxRFRsQktJRUV4TVJjd0ZRWURWUVFMRXc0eE5qYzBPVEk1T1RBd01ERXhNVEVUTUJFR0ExVUVDeE1LY0hKbGMyVnVZMmxoYkRFL01EMEdBMVVFQXhNMlFVNVVUMDVKVHlCU1QwSkZVbFJQSUZKUFUwRkVUeUJHUlZKU1JVbFNRU0JUUlVkVlRrUlBPakl4T0RRek1qUXpNREF3TVRZeE1JSUJJakFOQmdrcWhraUc5dzBCQVFFRkFBT0NBUThBTUlJQkNnS0NBUUVBeFIrNzNoUGF1UXpZRVBkdFl6MStJK0ZlZzRJT0l2UDVWQlJTN0dxM3d5UWxBbGZTK2hVRFN0ZVNjODRUZmlPT3pnc2N5TmRzUVN4SkU3VnFmb04vUTk0VTNkeEorV0xXaXpmK0R6cGhuVzNxTUtkNXhmQ2Z2VnQ0MCswTmZrRkJId0xFblc3VjVVWlM3UVpWTXVQSVFNV09SV3RwbU9FTlQ0bHJQNVZBa3NIUUM5cEc3VktVWnJXYWhHTFN6TnMreVVvUm52bjkxR1VaYlE5eEpURGZWOHhHTDNnYU1XYVVhYVZ3N2ZOY2VuTmF5VXROY2ViOGdiaHhweVpnMzNyTXhndHNaQnFZTDZUdFdGUm9pbU9CMjBDSEh6MS9IRVRGekJidzBWRnVQN0xkVnhVQnF6b2lmMkxFMWcrdnRXV0lRS091eUFhRmNoY1RpbGp6c09nSFdRSURBUUFCbzRJREREQ0NBd2d3SHdZRFZSMGpCQmd3Rm9BVUtWNUwxVVpNdS80V3AyUEJIY1FtOHQzWTh3VXdEZ1lEVlIwUEFRSC9CQVFEQWdYZ01HMEdBMVVkSUFSbU1HUXdZZ1lHWUV3QkFnRXpNRmd3VmdZSUt3WUJCUVVIQWdFV1NtaDBkSEE2THk5eVpYQnZjMmwwYjNKcGJ5NWhZM05oWm1WM1pXSXVZMjl0TG1KeUwyRmpMWE5oWm1WM1pXSnlabUl2WVdNdGMyRm1aWGRsWWkxeVptSXRjR010WVRFdWNHUm1NSUd1QmdOVkhSOEVnYVl3Z2FNd1Q2Qk5vRXVHU1doMGRIQTZMeTl5WlhCdmMybDBiM0pwYnk1aFkzTmhabVYzWldJdVkyOXRMbUp5TDJGakxYTmhabVYzWldKeVptSXZiR055TFdGakxYTmhabVYzWldKeVptSjJOUzVqY213d1VLQk9vRXlHU21oMGRIQTZMeTl5WlhCdmMybDBiM0pwYnpJdVlXTnpZV1psZDJWaUxtTnZiUzVpY2k5aFl5MXpZV1psZDJWaWNtWmlMMnhqY2kxaFl5MXpZV1psZDJWaWNtWmlkalV1WTNKc01JRzNCZ2dyQmdFRkJRY0JBUVNCcWpDQnB6QlJCZ2dyQmdFRkJRY3dBb1pGYUhSMGNEb3ZMM0psY0c5emFYUnZjbWx2TG1GamMyRm1aWGRsWWk1amIyMHVZbkl2WVdNdGMyRm1aWGRsWW5KbVlpOWhZeTF6WVdabGQyVmljbVppZGpVdWNEZGlNRklHQ0NzR0FRVUZCekFDaGtab2RIUndPaTh2Y21Wd2IzTnBkRzl5YVc4eUxtRmpjMkZtWlhkbFlpNWpiMjB1WW5JdllXTXRjMkZtWlhkbFluSm1ZaTloWXkxellXWmxkMlZpY21aaWRqVXVjRGRpTUlIUUJnTlZIUkVFZ2Nnd2djV0JJVUpGUWtWVVQwQlRRVXhPVlZSU1NVMUJTVk5OVDFOVFQxSlBMa05QVFM1Q1VxQXlCZ1ZnVEFFREFxQXBFeWRCVGxSUFRrbFBJRkpQUWtWU1ZFOGdVazlUUVVSUElFWkZVbEpGU1ZKQklGTkZSMVZPUkUrZ0dRWUZZRXdCQXdPZ0VCTU9NakU0TkRNeU5ETXdNREF4TmpHZ09BWUZZRXdCQXdTZ0x4TXRNVGN3TXpFNU9EQXdNekUzTWpRME5EUXlNakF3TURBd01EQXdNREF3TURBd01EQXdNREF3TURBd01EQXdvQmNHQldCTUFRTUhvQTRURERBd01EQXdNREF3TURBd01EQWRCZ05WSFNVRUZqQVVCZ2dyQmdFRkJRY0RBZ1lJS3dZQkJRVUhBd1F3Q1FZRFZSMFRCQUl3QURBTkJna3Foa2lHOXcwQkFRc0ZBQU9DQWdFQVYwbGF5YlZIU3NyZU5iZWdqNDRRbzJqTUgzc3U0VkVqek5ydFJiL2NYTW8wdmRyK1cyRDYvRDB1dVhXSTRSU2tBTGZLSXFnTUN1cmpXVENIYm1WMktFMXM2YWhBTC9iOXZaajV0aWwxNldLZnM5L2d4TE1ha1NtRWcvbkdzMFd6TUFwbnhGc09SRHdUSkdlWVM4MitDWHhNdGRCWWZUOEo2NE1WUmo3ejc2NFlicWhvbC9NeWIyRllMMXdONVNEU3E2QWl0dG9OR0g1UldOM1hoV1Q0Vm1PVTJ5ZHNRWVVvZC8ya2g0US9HQzROVFFCdFE1bGlTb1dmOFdaMjZyZlA0dzAwQ1RPMHdrZjg0MHVEU29GN3QydVNoWUFvOXJyVWpJYWxEOGFacWF0WDlzRzVtV05PVU5kb0xqcFRUcHc5ajZyei9OL2VPYm9Ndy8wdHQ0bUdaeWc1Z2FPM2lFbDhSL0ZxTldWN2dJbTlNeDI2VUtodDAxbU9WL3hza0o5Mi9OSTNoa05kWkwyRGJhakVCZnFUam9BT2p3eWdmdzBKUkRIa2FXdTRPUHlyL1krN29RY2RnNnJIQjRtVElmd1hIS20zV0drbWgvRTk1ei9TTzdvTjZWbFRBYURkRHlOcXlhWkhxb2pPSUZFUFpoejh2N3pTNWhkbWxYdkh4Wk5UNVRpdXpoVEU3ZlVDcU1MZlF2UjZNNjdyYUViL3ZWRlpDTDk3d1ptNmZ4cXhkZ092UkwzcWphcTRuYXRjYklnTnRNeUZzN1JFYStDZm5CYmVISE8zK3hVeDExdVYwaEsrc0poOXRsSjFVUFNPNEQrRHphSlJIdnZ3VHMzNlVUck5mRGg3Mkp1WFJ3M1B6MTFESk1yUmRPZEdoNDRrQnVHajBJakdLdE1sSFJFPTwvWDUwOUNlcnRpZmljYXRlPjwvWDUwOURhdGE+PC9LZXlJbmZvPjwvU2lnbmF0dXJlPjwvZXZlbnRvTURGZT48cmV0RXZlbnRvTURGZSB4bWxucz0iaHR0cDovL3d3dy5wb3J0YWxmaXNjYWwuaW5mLmJyL21kZmUiIHZlcnNhbz0iMy4wMCI+PGluZkV2ZW50byBJZD0iSUQ5MjQyMjAwMDE3MTE4MjEiPjx0cEFtYj4xPC90cEFtYj48dmVyQXBsaWM+UlMyMDIyMDkwNTEzMTgzMzwvdmVyQXBsaWM+PGNPcmdhbz4yNDwvY09yZ2FvPjxjU3RhdD4xMzU8L2NTdGF0Pjx4TW90aXZvPkV2ZW50byByZWdpc3RyYWRvIGUgdmluY3VsYWRvIGFvIE1ERi1lPC94TW90aXZvPjxjaE1ERmU+MjQyMjEwMjE4NDMyNDMwMDAxNjE1ODAwMTAwMDAwNTQ2MTE3ODMyMzI0MjQ8L2NoTURGZT48dHBFdmVudG8+MTEwMTE0PC90cEV2ZW50bz48eEV2ZW50bz5JbmNsdXPDo28gZGUgQ29uZHV0b3I8L3hFdmVudG8+PG5TZXFFdmVudG8+MTwvblNlcUV2ZW50bz48ZGhSZWdFdmVudG8+MjAyMi0xMC0yMFQwODo0OTo1NC0wMzowMDwvZGhSZWdFdmVudG8+PG5Qcm90PjkyNDIyMDAwMTcxMTgyMTwvblByb3Q+PC9pbmZFdmVudG8+PC9yZXRFdmVudG9NREZlPjwvcHJvY0luY0NvbmR1dG9yPg==');
//$logo = 'data://text/plain;base64,'. base64_encode(file_get_contents(realpath(__DIR__ . '/../images/tulipas.png')));
$logo = realpath(__DIR__ . '/../images/tulipas.png');

$dadosEmitente = [
    'razao' => 'QQ Comercio e Ind. Ltda',
    'logradouro' => 'Rua vinte e um de marÃ§o',
    'numero' => '200',
    'complemento' => 'sobreloja',
    'bairro' => 'Nova Onda',
    'CEP' => '99999-999',
    'municipio' => 'Onda',
    'UF' => 'MG',
    'telefone' => '33333-3333',
    'email' => 'qq@gmail.com'
];

try {
    $daevento = new Daevento($xml, $dadosEmitente);
    $daevento->debugMode(true);
    $daevento->creditsIntegratorFooter('WEBNFe Sistemas - http://www.webenf.com.br');
    $pdf = $daevento->render($logo);
    header('Content-Type: application/pdf');
    echo $pdf;
} catch (\Exception $e) {
    echo $e->getMessage();
}
